<div class="widget{{classes}}">
  {{!-- show label only if it was provided and NOT for dialog widget --}}
  {{#if (and (unlessEq label undefined) (unlessEq type "dialog"))}}
    <label class="{{parent}}-label">{{label}}:</label>
  {{/if}}
  {{!-- show identifier container with warning icon and information --}}
  {{#if id}}<div class="id"></div>{{/if}}
  {{!-- add main widget component --}}
  {{#if (eq type "combo")}}
    <select class="{{parent}}-{{label}}" name="{{label}}" required {{#if disable}}disabled{{/if}}>
      <option value="" disabled selected hidden>Select value</option>
      {{#each (split options "|")}}
        <option value={{this}} {{#if (eq ../value this)}}selected{{/if}}>{{this}}</option>
      {{/each}}
    </select>
  {{else if (eq type "dialog")}}
    <dialog class="{{parent}}-dialog">
      {{#if (unlessEq label undefined)}}
        <label class="{{parent}}-label">{{label}}:</label>
      {{/if}}
      <form method="dialog">
        {{#each (split options "|")}}
          <button type="submit" value="{{this}}">{{this}}</button>
        {{/each}}
      </form>
    </dialog>
  {{else if (eq type "image")}}
    <div class="{{parent}}-file-container">
      <input type="file" name="{{label}}-file" class="{{parent}}-{{label}}-file" accept="image/*"/>
      <input type="button" name="{{label}}-select" class="{{parent}}-{{label}}-button"
        {{#if (equalsLength value 0)}}
          value="Select image"
        {{else}}
          value="{{last (split value "/")}}" url="{{value}}"
        {{/if}}
      />
      <input type="button" name="{{label}}-upload" class="{{parent}}-{{label}}-submit" value="upload"/>
    </div>
  {{else if (eq type "file")}}
    <div class="{{parent}}-file-container">
      {{#if (gt (length options) 0)}}
        <input type="file" name="{{label}}-file" class="{{parent}}-{{label}}-file" accept="{{options}}"/>
        <input type="button" name="{{label}}-select" class="{{parent}}-{{label}}-button" value="{{value}}"/>
        <input type="button" name="{{label}}-apply" class="{{parent}}-{{label}}-apply" value="apply"/>
      {{else}}
        <input type="button" name="{{label}}-apply" class="{{parent}}-{{label}}-apply" value="{{value}}"/>
      {{/if}}
    </div>
  {{else}}
    <input type="{{type}}" class="{{parent}}-{{label}}" name="{{label}}" value="{{value}}" {{#if disable}}disabled{{/if}}/>
  {{/if}}
</div>